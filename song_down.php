<?PHP
include "db/config.php";
if (isset($_GET['song_no'])){
	if (is_numeric($_GET['song_no'])){
		if ($_GET['song_no']<=$max_song_no AND $_GET['song_no']>=0){
			if (isset($_GET['type'])){
				if ($_GET['type']=='piano' OR $_GET['type']=='orchestral' OR $_GET['type']=='new' OR $_GET['type']=='joy'){
		set_time_limit (15 * 60);
		$song_no=$_GET['song_no'];
        if ($_GET['song_no']<=99) $song_no='0'.$_GET['song_no'];
       if ($_GET['song_no']<=9) $song_no='00'.$_GET['song_no'];
		$file_name='';
		if ($_GET['type']=='piano'){
		$file_name='iasn_E_'.$song_no.'.mp3';
		$index_music= array(
		'001' => 'b9',
		'002' => '11',
		'003' => '03',
		'004' => 'b4',
		'005' => '1a',
		'006' => '43',
		'007' => '00',
		'008' => '23',
		'009' => '44',
		'010' => 'd2',
		'011' => '20',
		'012' => '73',
		'013' => '03',
		'014' => 'e6',
		'015' => '84',
		'016' => 'eb',
		'017' => 'a8',
		'018' => 'c2',
		'019' => 'e2',
		'020' => 'af',
		'021' => '04',
		'022' => 'a1',
		'023' => '23',
		'024' => '5f',
		'025' => '86',
		'026' => 'e6',
		'027' => '02',
		'028' => 'ce',
		'029' => 'a5',
		'030' => 'd0',
		'031' => 'f8',
		'032' => '4e',
		'033' => 'a7',
		'034' => '48',
		'035' => '55',
		'036' => '1c',
		'037' => '25',
		'038' => '5a',
		'039' => '91',
		'040' => '30',
		'041' => '81',
		'042' => '4c',
		'043' => 'ad',
		'044' => '5a',
		'045' => '84',
		'046' => '21',
		'047' => '49',
		'048' => 'c0',
		'049' => '90',
		'050' => '9c',
		'051' => 'bb',
		'052' => '9c',
		'053' => '6f',
		'054' => 'b5',
		'055' => 'aa',
		'056' => '74',
		'057' => '27',
		'058' => 'e3',
		'059' => 'b3',
		'060' => '65',
		'061' => '6c',
		'062' => '7d',
		'063' => '6e',
		'064' => 'bb',
		'065' => 'f0',
		'066' => '04',
		'067' => '5e',
		'068' => '7b',
		'069' => 'e1',
		'070' => '6e',
		'071' => 'b8',
		'072' => '76',
		'073' => '19',
		'074' => '27',
		'075' => '9b',
		'076' => '56',
		'077' => '64',
		'078' => '4e',
		'079' => 'd0',
		'080' => '5e',
		'081' => '56',
		'082' => 'a4',
		'083' => '7a',
		'084' => '87',
		'085' => 'c3',
		'086' => '08',
		'087' => 'fe',
		'088' => '98',
		'089' => 'ae',
		'090' => '5a',
		'091' => 'd9',
		'092' => '9a',
		'093' => '09',
		'094' => '9d',
		'095' => '4c',
		'096' => '2e',
		'097' => '3d',
		'098' => 'ea',
		'099' => '4d',
		'100' => 'e7',
		'101' => 'd0',
		'102' => 'c6',
		'103' => '14',
		'104' => '3f',
		'105' => 'b2',
		'106' => 'c1',
		'107' => '93',
		'108' => '0a',
		'109' => '05',
		'110' => 'cf',
		'111' => 'aa',
		'112' => '12',
		'113' => 'd7',
		'114' => 'ea',
		'115' => 'b9',
		'116' => 'e8',
		'117' => 'ce',
		'118' => '60',
		'119' => 'f4',
		'120' => 'a0',
		'121' => 'aa',
		'122' => 'e9',
		'123' => '9b',
		'124' => '98',
		'125' => 'dd',
		'126' => 'c8',
		'127' => 'dd',
		'128' => '70',
		'129' => 'ed',
		'130' => '67',
		'131' => '98',
		'132' => 'e9',
		'133' => '37',
		'134' => '50',
		'135' => '27',
		);
		}
		if ($_GET['type']=='orchestral'){
		$file_name='iasnm_E_'.$song_no.'.mp3';
		$index_music= array(
		'001' => '64',
		'002' => 'f1',
		'003' => '91',
		'004' => '2e',
		'005' => 'b4',
		'006' => 'b5',
		'007' => '8c',
		'008' => '00',
		'009' => '41',
		'010' => 'ad',
		'011' => 'b2',
		'012' => '8c',
		'013' => 'a0',
		'014' => '46',
		'015' => 'a6',
		'016' => '6e',
		'017' => '7b',
		'018' => 'c3',
		'019' => 'db',
		'020' => 'd5',
		'021' => 'd7',
		'022' => '0f',
		'023' => '8f',
		'024' => '29',
		'025' => 'e7',
		'026' => 'a0',
		'027' => '58',
		'028' => '06',
		'029' => 'c1',
		'030' => '25',
		'031' => '7b',
		'032' => '81',
		'033' => '79',
		'034' => '0e',
		'035' => '9e',
		'036' => '41',
		'037' => 'd3',
		'038' => '36',
		'039' => '7c',
		'040' => '71',
		'041' => '49',
		'042' => '9f',
		'043' => 'ea',
		'044' => 'cd',
		'045' => '33',
		'046' => '50',
		'047' => '24',
		'048' => '90',
		'049' => 'fe',
		'050' => '9a',
		'051' => 'af',
		'052' => '9c',
		'053' => 'f5',
		'054' => 'cc',
		'055' => '0c',
		'056' => '32',
		'057' => 'be',
		'058' => '2f',
		'059' => '4f',
		'060' => 'aa',
		'061' => '05',
		'062' => '4d',
		'063' => '0c',
		'064' => 'b3',
		'065' => 'a2',
		'066' => 'd3',
		'067' => 'bd',
		'068' => '68',
		'069' => '19',
		'070' => 'bb',
		'071' => '13',
		'072' => '0d',
		'073' => '14',
		'074' => '8d',
		'075' => 'a8',
		'076' => 'f9',
		'077' => '76',
		'078' => 'f5',
		'079' => '38',
		'080' => '39',
		'081' => '9e',
		'082' => '68',
		'083' => 'c8',
		'084' => 'dc',
		'085' => '58',
		'086' => 'bb',
		'087' => 'ab',
		'088' => '44',
		'089' => '27',
		'090' => '82',
		'091' => '7e',
		'092' => '19',
		'093' => '37',
		'094' => '3c',
		'095' => '84',
		'096' => '4d',
		'097' => '53',
		'098' => '59',
		'099' => '81',
		'100' => '6e',
		'101' => '79',
		'102' => 'f0',
		'103' => '01',
		'104' => 'f3',
		'105' => '31',
		'106' => '17',
		'107' => '97',
		'108' => 'f5',
		'109' => '28',
		'110' => '36',
		'111' => '75',
		'112' => 'a4',
		'113' => '35',
		'114' => 'a8',
		'115' => 'd9',
		'116' => '08',
		'117' => '46',
		'118' => '86',
		'119' => '98',
		'120' => '39',
		'121' => 'b3',
		'122' => '47',
		'123' => '71',
		'124' => '3b',
		'125' => '38',
		'126' => '8d',
		'127' => '81',
		'128' => '21',
		'129' => 'e2',
		'130' => '27',
		'131' => '8f',
		'132' => '93',
		'133' => '48',
		'134' => 'f5',
		'135' => 'ab',
		);
		}
		if ($_GET['type']=='new'){
		$file_name='snnw_E_'.$song_no.'.mp3';
		$index_music= array(
		'136' => 'c5',
		'137' => 'e3',
		'138' => 'fc',
		'139' => 'd3',
		'140' => '58',
		'141' => '81',
		'142' => 'ca',
		'143' => 'a2',
		'144' => 'd8',
		'145' => 'fc',
		'146' => '7b',
		'147' => 'a8',
		'148' => '34',
		'149' => 'd8',
		'150' => '3b',
		'151' => '74',
		'152' => 'a2',
		'153' => 'cc',
		'154' => 'b9',
		);
		}
		if ($_GET['type']=='joy'){
		$file_name='sjjm_E_'.$song_no.'.mp3';
		$index_music= array(
		'001' => 'a2',
		'002' => 'ab',
		'003' => '57',
		'004' => 'b5',
		'005' => '4a',
		'006' => 'a4',
		'007' => '6e',
		'008' => '10',
		'009' => 'a4',
		'010' => '6f',
		'011' => '1b',
		'012' => '7a',
		'013' => '69',
		'014' => '81',
		'015' => '50',
		'016' => '30',
		'017' => '86',
		'018' => 'c0',
		'019' => '9e',
		'020' => '36',
		'021' => 'ce',
		'022' => '83',
		'023' => 'd8',
		'024' => 'bd',
		'025' => '81',
		'026' => '3f',
		'027' => 'a7',
		'028' => 'fd',
		'029' => '46',
		'030' => '78',
		'031' => '99',
		'032' => '93',
		'033' => '15',
		'034' => '19',
		'035' => '93',
		'036' => '76',
		'037' => 'd4',
		'038' => '59',
		'039' => '20',
		'040' => 'e7',
		'041' => 'bc',
		'042' => 'e7',
		'043' => 'ba',
		'044' => '45',
		'045' => '7f',
		'046' => 'c6',
		'047' => '4e',
		'048' => '29',
		'049' => 'cd',
		'050' => '39',
		'051' => 'ae',
		'052' => '9a',
		'053' => 'df',
		'054' => '0a',
		'055' => 'dd',
		'056' => '6a',
		'057' => '3b',
		'058' => '98',
		'059' => '10',
		'060' => '26',
		'061' => 'f9',
		'062' => '46',
		'063' => 'ba',
		'064' => '6b',
		'065' => '87',
		'066' => '9f',
		'067' => '29',
		'068' => '8c',
		'069' => '32',
		'070' => 'dd',
		'071' => '00',
		'072' => '50',
		'073' => '0f',
		'074' => '4a',
		'075' => 'e6',
		'076' => '4b',
		'077' => 'ad',
		'078' => '21',
		'079' => 'd8',
		'080' => '4f',
		'081' => 'e7',
		'082' => '4a',
		'083' => '16',
		'084' => 'cc',
		'085' => '78',
		'086' => '22',
		'087' => 'f1',
		'088' => '2e',
		'089' => '5d',
		'090' => 'fc',
		'091' => '3c',
		'092' => 'b0',
		'093' => '5a',
		'094' => 'f4',
		'095' => '61',
		'096' => '7b',
		'097' => 'e0',
		'098' => 'f0',
		'099' => '9a',
		'100' => '59',
		'101' => '35',
		'102' => '1e',
		'103' => '17',
		'104' => '2b',
		'105' => '7e',
		'106' => '5c',
		'107' => 'ad',
		'108' => 'ea',
		'109' => 'd5',
		'110' => '33',
		'111' => '07',
		'112' => 'de',
		'113' => '4a',
		'114' => '67',
		'115' => 'ef',
		'116' => 'af',
		'117' => '27',
		'118' => '4d',
		'119' => '2d',
		'120' => '3c',
		'121' => '92',
		'122' => 'ae',
		'123' => 'b9',
		'124' => 'f3',
		'125' => '86',
		'126' => '3e',
		'127' => '1e',
		'128' => 'c2',
		'129' => '6a',
		'130' => '75',
		'131' => 'e7',
		'132' => '0f',
		'133' => '4b',
		'134' => 'e3',
		'135' => '68',
		'136' => 'ed',
		'137' => '54',
		'138' => '8c',
		'139' => 'ab',
		'140' => '28',
		'141' => '57',
		'142' => '00',
		'143' => '08',
		'144' => '5e',
		'145' => '4e',
		'146' => '27',
		'147' => '5f',
		'148' => '75',
		'149' => 'd4',
		'150' => 'b2',
		'151' => '21',
		);
		}
		if ($file_name!=''){
		file_put_contents("./kh-songs/".$file_name, fopen("http://download-a.akamaihd.net/files/media_music/".$index_music[$song_no]."/".$file_name, 'r'));
		}	
				}
			}
		}
	}
}
?>